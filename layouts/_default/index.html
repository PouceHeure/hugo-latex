{{ define "main" }}
<div class="homepage-container text-center">
    <h1 class="text-primary mt-5 d-flex align-items-center justify-content-center">
        <span class="text-secondary dynamic-container">
            <span id="changing-word" class="dynamic-text"></span>
        </span>
    </h1>
    
    <p class="lead">{{ .Site.Params.about }}</p>

    <div class="row mt-5 gy-4 d-flex justify-content-center">
        <div class="col-md-4">
            <div class="card shadow h-100 border-0 rounded-lg overflow-hidden">
                <div class="card-body text-center p-4">
                    <h3 class="text-primary">üìù Projects</h3>
                    <p class="text-muted">Dive into my research, cutting-edge projects, and innovative developments.</p>
                </div>
                <div class="text-center m-3">
                    <a href="/projects/" class="btn btn-primary btn-lg w-100">View Projects</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow h-100 border-0 rounded-lg overflow-hidden">
                <div class="card-body text-center p-4">
                    <h3 class="text-primary">üìö Scientific Articles</h3>
                    <p class="text-muted">Read my latest scientific publications and academic contributions.</p>
                </div>
                <div class="text-center m-3">
                    <a href="/articles/" class="btn btn-primary btn-lg w-100">View Publications</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow h-100 rounded-lg overflow-hidden">
                <div class="card-body text-center p-4">
                    <h3 class="text-primary">üìÑ About</h3>
                    <p class="text-muted">Explore my academic and professional journey with key achievements and milestones.</p>
                </div>
                <div class="text-center m-3">
                    <a href="/cv/" class="btn btn-primary btn-lg w-100">View CV</a>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="container mt-5">
    <h2 class="text-center text-secondary m-5">Latest Projects</h2>
    <div class="row">
        {{ range first 3 (where .Site.RegularPages "Section" "in" (slice "blog" "projects")) }}
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow rounded-lg">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">
                            <a href="{{ .RelPermalink }}" class="text-decoration-none text-dark">{{ .Title }}</a>
                        </h5>
                        <p class="text-muted small">Published on {{ .Date.Format "02 January 2006" }}</p>

                        <div class="tags mb-2">
                            {{ range .Params.tags }}
                                <span class="badge bg-secondary me-1">{{ . }}</span>
                            {{ end }}
                        </div>
                        <div class="mt-auto">
                            <a href="{{ .RelPermalink }}" class="btn btn-outline-primary btn-sm">Read more</a>
                        </div>
                    </div>
                </div>
            </div>
        {{ end }}
    </div>
</div> 

<script>
document.addEventListener("DOMContentLoaded", function() {
    function formatText(str) {
        return str.replace(/-/g, ' ').replace(/\b\w/g, char => char.toUpperCase());
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            let j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    const wordsHugo = [
        {{ range $index, $tag := .Site.Taxonomies.tags }}
            {{ if $index }},{{ end }} "{{  $tag.Page.Title }}"
        {{ end }}
    ];

    let words = wordsHugo.map(formatText);
    words = shuffleArray(words);

    let i = 0;
    const changingWord = document.getElementById("changing-word");

    function typeWriterEffect(word, index) {
        if (index <= word.length) {
            changingWord.textContent = word.substring(0, index);
            setTimeout(() => typeWriterEffect(word, index + 1), 100);
        } else {
            setTimeout(() => deleteEffect(word.length), 2000);
        }
    }

    function deleteEffect(length) {
        if (length >= 0) {
            changingWord.textContent = changingWord.textContent.substring(0, length);
            setTimeout(() => deleteEffect(length - 1), 50);
        } else {
            i = (i + 1) % words.length;
            setTimeout(() => typeWriterEffect(words[i], 0), 500);
        }
    }

    if (words.length > 0) {
        typeWriterEffect(words[i], 0);
    }
});
</script>

{{ end }}
