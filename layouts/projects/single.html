{{ define "main" }}

<!-- Meta Tags -->
<meta name="description" content="{{ with .Params.description }}{{ . | plainify | truncate 160 }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}">
<meta name="keywords" content="{{ delimit .Params.tags ", " }}">
<meta name="author" content="{{ .Site.Params.name }}">
<meta property="og:title" content="{{ .Title }}">
<meta property="og:description" content="{{ with .Params.description }}{{ . | plainify | truncate 160 }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}">
<meta property="og:type" content="article">
<meta property="og:url" content="{{ .Permalink }}">
{{ with .Params.image }}
  <meta property="og:image" content="{{ . | absURL }}">
{{ end }}

<!-- Reset Counters -->
{{ .Scratch.Set "figCounter" 0 }}
{{ .Scratch.Set "eqCounter" 0 }}
{{ .Scratch.Set "videoCounterCounter" 0 }}

<!-- Table of Contents Styles -->
<link rel="stylesheet" href="/css/toc.css">
<link rel="stylesheet" href="/css/markdown-index.css">

<style>
.markdown-content .content h2:first-of-type {
  margin-top: 50px !important;
}
</style>

<!-- Page Layout -->
<div class="container d-flex flex-column flex-md-row align-items-start min-vh-100 gap-4">

  <!-- Sidebar: TOC -->
  <aside class="toc w-30 d-none d-lg-block toc-sticky">
    <div class="toc-container p-3 shadow rounded card d-flex flex-column h-100 card-transparent">
      <h5 class="toc-title"><i class="bi bi-journal-richtext me-1"></i> Contents</h5>
      {{ .TableOfContents }}
    </div>
  </aside>

  <!-- Main Content -->
  <article class="markdown-content flex-grow-1 w-100 w-md-75 card-transparent p-2 p-md-3">

    <!-- Title -->
    <h1 class="text-primary">{{ .Title }}</h1>

    <!-- Tags + Code Languages -->
    <div class="d-flex flex-wrap gap-2">
      {{ range .Params.tags }}
        <a href="/tags/{{ . | urlize }}/"
          class="btn btn-sm btn-secondary">
          <i class="bi bi-tag"></i>
          <strong style="font-size: 1.0em;">{{ partial "tagrepr.html" . }}</strong>
        </a>
      {{ end }}

      {{ with index .Params "codelang" }}
      {{ range . }}
        <span class="btn btn-sm btn-info text-white" style="pointer-events: none;">
          <i class="bi bi-code-slash"></i>
          <strong style="font-size: 1.0em;">{{ . }}</strong>
        </span>
      {{ end }}
    {{ end }}
    </div>

    <!-- Article Button -->
    {{ with .Params.article }}
      {{ $article := site.GetPage . }}
      {{ if $article }}
        <div class="align-items-center mt-2">
          <a href="{{ $article.RelPermalink }}" class="btn btn-success" style="text-decoration: none;">
            <span style="text-decoration: underline;"><i class="bi bi-book-half"></i></span>
            <span style="display:inline-block; width: 0.25em;"></span>
            <span>Read Scientific Article</span>
          </a>
        </div>
      {{ end }}
    {{ end }}

    <!-- GitHub Source Code Button -->
    {{ with .Params.Github }}
      <div class="align-items-center mt-2">
        <a href="{{ . }}" rel="noopener noreferrer" class="btn btn-success" style="text-decoration: none;">
          <span style="text-decoration: underline;"><i class="bi bi-github"></i></span>
          <span style="display:inline-block; width: 0.25em;"></span>
          <span>Source Code</span>
        </a>
      </div>
    {{ end }}

    <!-- Markdown Content -->
    <div class="content">
      {{ .Content | safeHTML }}
    </div>

 

  </article>

  
</div>

<!-- <br><br> -->

<!-- Scripts -->
<script src="/js/highlight-toc.js"></script>
<script src="/js/counter-toc.js"></script>
<script src="/js/select-toc-part.js"></script>
<script src="/js/select-video.js"></script>

{{ end }}
